<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorator="navbar">
   <head th:replace="fragments/template :: header">
	  <!-- Custom styles for this fragments/template -->
      <link rel="stylesheet" th:href="@{/css/departement.css}"/>	
   </head>
   <body>
      <div layout:fragment="content">
         <p th:text="${template}">Should not be displayed</p>         
         <table class="table table-hover table-bordered" data-sort-name="nomDep" data-sort-order="desc">
            <thead>
               <tr class="info">
                  <th class="col col-lg-2" data-field="no" data-sortable="true"><a th:href="@{'/departements/page/' + ${currentPage} + '?sortField=numDep' + '&sortDirection=' + ${reverseSortDirection}}">Department no.</a></th>
                  <th class="col-md-auto"><a th:href="@{'/departements/page/' + ${currentPage} + '?sortField=numDep' + '&sortDirection=' + ${reverseSortDirection}}">Department name</a></th>
                  <th class="col col-lg-2"><a th:href="@{'/departements/page/' + ${currentPage} + '?sortField=numDep' + '&sortDirection=' + ${reverseSortDirection}}">Chef Lieu</a></th>
                  <th class="col-md-auto"><a th:href="@{'/departements/page/' + ${currentPage} + '?sortField=numDep' + '&sortDirection=' + ${reverseSortDirection}}">Nom Commune</a></th>
                  <th class="col-sm-2 text-center" colspan="2">Actions</th>
                                    
               </tr>
            </thead>
            <tbody>
               <th:block th:each="departement : ${departements}">
                  <tr>
                  
                  	<!-- Three different ways to handle null value -->
                  	 <!-- 1- ? operand:  If departement object exists, it will display numDep -->
                     <td th:text="${departement?.numDep}">numDep</td>
                     
                     <td th:text="${departement?.nomDep}">nomDep</td>
                     
                     
                     <!--2-  ? : operand that is a short way to if else condition -->
                     <td th:text="${departement.lieu != null} ? ${departement.lieu.codeInsee} : 'lieu.codeInsee not found'">chefLieu</td>
                     
                     
                     <!-- ${#objects.nullSafe(obj, default)} -->
 	                 <!-- <td th:text="${departement?.lieu?.nomCom}">Nom Commune</td>  -->
 	                 <td th:text="${#objects.nullSafe(departement?.lieu?.nomCom, 'lieu.nomCom not found')}">Nom Commune</td>
					 <td th:replace="fragments/template :: remove-update(entity='departements', id=${departement.numDep})"></td> 	                                                     
                 </tr>
              </th:block>
            <tbody>
         </table>
      <div th:replace="fragments/template :: pagination"></div>
         
      </div>
      <div th:replace="fragments/template :: footer"></div>
      <th:block th:replace="fragments/template :: scripts-data-table"></th:block>
      
   </body>
</html>